let openedModal=null;function openModal(a){openedModal&&closeModal(openedModal),a?.classList?.remove("modal-closed"),openedModal=a}function closeModal(a){a?.classList?.add("modal-closed"),openedModal=null}function addOpenModalListener(a,b,c=!0,d=!1){a?.addEventListener("click",a=>{c&&a.preventDefault(),d&&(b?.classList?.add("modal-show"),setTimeout(()=>contactCompanyModal?.classList.remove("modal-show"),600)),openModal(b)})}function addCloseModalListener(a,b,c=!0){a?.addEventListener("click",a=>{c&&a.preventDefault(),closeModal(b)})}function addBuyProductListener(a,b){a?.addEventListener("click",a=>{a.target.classList.contains("product-buy-button")&&openModal(b)})}function unsetRequired(a){a&&(a.required=!1)}const cartModal=document.querySelector(".modal-cart"),makeOrderLink=cartModal?.querySelector(".make-order-link");cartModal?.addEventListener("click",({target:a})=>{(a.classList.contains("modal-close-button")||a.classList.contains("continue-shopping-button"))&&closeModal(cartModal)}),addCloseModalListener(makeOrderLink,cartModal,!1);const contactCompanyButton=document.querySelector(".company-contact-modal-link"),contactCompanyModal=document.querySelector(".modal-contact-company"),contactCompanyForm=contactCompanyModal?.querySelector(".contact-company-form"),nameField=contactCompanyForm?.querySelector("[name=\"name\"]"),emailField=contactCompanyForm?.querySelector("[name=\"email\"]"),textField=contactCompanyForm?.querySelector("[name=\"email-text\"]"),closeContactCompanyButton=contactCompanyModal?.querySelector(".modal-close-button"),companyMapLink=document.querySelector(".company-contacts-map"),companyMapModal=document.querySelector(".modal-map"),closeCompanyMapButton=companyMapModal?.querySelector(".modal-close-button"),popularProductsList=document.querySelector(".popular-products-list");unsetRequired(nameField),unsetRequired(emailField),unsetRequired(textField),addOpenModalListener(contactCompanyButton,contactCompanyModal,!0,!0),addCloseModalListener(closeContactCompanyButton,contactCompanyModal),addOpenModalListener(companyMapLink,companyMapModal),addCloseModalListener(closeCompanyMapButton,companyMapModal),addBuyProductListener(popularProductsList,cartModal);const emailRegExp=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;contactCompanyForm?.addEventListener("submit",a=>{nameField?.value&&emailField?.value&&textField?.value?(localStorage.setItem("name",nameField.value),emailRegExp.test(emailField?.value)&&localStorage.setItem("email",emailField?.value),closeModal(contactCompanyModal)):(a.preventDefault(),console.log("submit"),contactCompanyModal?.classList.add("modal-error"),setTimeout(()=>contactCompanyModal?.classList.remove("modal-error"),600))}),contactCompanyButton?.addEventListener("click",()=>{const a=localStorage.getItem("name"),b=localStorage.getItem("email");a||b?(a&&nameField&&(nameField.value=a,emailField?.focus()),b&&emailField&&(emailField.value=b,textField?.focus())):nameField?.focus(),textField&&(textField.value="")});const catalogProductsList=document.querySelector(".catalog-products-list");addBuyProductListener(catalogProductsList,cartModal);